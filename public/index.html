
<!DOCTYPE html>
<!--[if lt IE 7]>      <html lang="en" class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html lang="en" class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html lang="en" class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html lang="en" class="no-js"> <!--<![endif]-->
    <head>
    	<!-- meta character set -->
        <meta charset="utf-8">
		<!-- Always force latest IE rendering engine or request Chrome Frame -->
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>YK Sensor</title>		
		
		<!-- Mobile Specific Meta -->
        <meta name="viewport" content="width=device-width, initial-scale=1">
		
		<!-- CSS
		================================================== -->
		
		<link href='http://fonts.googleapis.com/css?family=Open+Sans:400,300,700' rel='stylesheet' type='text/css'>
		
		<!-- Fontawesome Icon font -->
        <link rel="stylesheet" href="css/font-awesome.min.css">
		<!-- bootstrap.min -->
        <link rel="stylesheet" href="css/jquery.fancybox.css">
		<!-- bootstrap.min -->
        <link rel="stylesheet" href="css/bootstrap.min.css">
		<!-- bootstrap.min -->
        <link rel="stylesheet" href="css/owl.carousel.css">
		<!-- bootstrap.min -->
        <link rel="stylesheet" href="css/slit-slider.css">
		<!-- bootstrap.min -->
        <link rel="stylesheet" href="css/animate.css">
		<!-- Main Stylesheet -->
        <link rel="stylesheet" href="css/main.css">

		<!-- Modernizer Script for old Browsers -->
        <script src="js/modernizr-2.6.2.min.js"></script>

    </head>
	
    <body id="body">
        <script>

//-------------------=|DATO 0|=-------------------
/*
            function getID() {
                fetch('/id')
                .then(response => response.json())
                .then(data => {
                    document.getElementById("data_id").innerHTML = data[0].id;
                });
            }

            function getTime() {
                fetch('/timestamp')
                .then(response => response.json())
                .then(data => {
                    document.getElementById("data_time").innerHTML = data[0].hora;
                });
            }

            function getTemp() {
                fetch('/temp')
                .then(response => response.json())
                .then(data => {
                    document.getElementById("data_temp").innerHTML = data[0].temperatura;
                });
            }

            function getLum() {
                fetch('/luminosity')
                .then(response => response.json())
                .then(data => {
                    document.getElementById("data_lum").innerHTML = data[0].luminosidad;
                });
            }

            function getHum() {
                fetch('/humidity')
                .then(response => response.json())
                .then(data => {
                    document.getElementById("data_hum").innerHTML = data[0].humedad;
                });
            }

            function getState() {
                fetch('/state')
                .then(response => response.json())
                .then(data => {
                    document.getElementById("data_state").innerHTML = data[0].estado;
                });
            }
*/
//-------------------=|DATO 0|=-------------------

            
            function getState4() {
                fetch('/read4')
                .then(async response => response.json())
                .then( data => {

                    //dato actual
                    document.getElementById("data_id").textContent = data[0].id;
                    document.getElementById("data_time").textContent = data[0].hora;
                    document.getElementById("data_temp").textContent = data[0].temperatura;
                    document.getElementById("data_hum").textContent = data[0].humedad;
                    document.getElementById("data_lum").textContent = data[0].luminosidad;
                    document.getElementById("data_state").textContent = data[0].estado;

                    const table = document.getElementById("salvanotas");

                    while (table.rows.length > 1) {

                        table.deleteRow(-1);

                    }

                    for (let i = 0; i < data.length; i++){
                        let row = table.insertRow(-1);
                        let id = row.insertCell(0);
                        let time = row.insertCell(1);
                        let temp = row.insertCell(2);
                        let hum = row.insertCell(3);
                        let lum = row.insertCell(4);
                        let state = row.insertCell(5);

                        id.innerHTML = data[i].id;
                        time.innerHTML = data[i].hora;
                        temp.innerHTML = data[i].temperatura;
                        hum.innerHTML = data[i].humedad;
                        lum.innerHTML = data[i].luminosidad;
                        state.innerHTML = data[i].estado;


                    }
                    
                    
                });
            }

            setInterval(getState4, 2000);
    
            const formElement = document.getElementById("btn btn-blue btn-effect")
            
            formElement.addEventListener("submit", (event) =>{
                fetch('/submit', {
                    method: 'get',
                    body: 1
                })
            })

        </script>


		<!-- preloader -->
		<div id="preloader">
            <div class="loder-box">
            	<div class="battery"></div>
            </div>
		</div>
		<!-- end preloader -->

		
		<main class="site-content" role="main">
		
        <!--
        Home Slider
        ==================================== -->
		
		<section id="home-slider">
            <div id="slider" class="sl-slider-wrapper">

				<div class="sl-slider">
				
					<div class="sl-slide" data-orientation="horizontal" data-slice1-rotation="-25" data-slice2-rotation="-25" data-slice1-scale="2" data-slice2-scale="2">

						<div class="bg-img bg-img-1"></div>

						<div class="slide-caption">
                            <div class="caption-content">
                                <h2 class="animated fadeInDown">Datos Actuales</h2>
                            </div>
                            
                        </div>
                        

                        <div class="slide-caption2">
                            <div class="caption-content">
                                <table>
                                    <thead>
                                    <tr>
                                        <th>ID</th>
                                        <th>Timestamp</th>
                                        <th>Temperatura</th>
                                        <th>Humedad</th>
                                        <th>Intensidad</th>
                                        <th>Estado</th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    <tr>
                                        <td id="data_id"></td>
                                        <td id="data_time"></td>
                                        <td id="data_temp"></td>
                                        <td id="data_hum"></td>
                                        <td id="data_lum"></td>
                                        <td id="data_state"></td>
                                    </tr>
                                </table>
                                <a href="#" class="btn btn-blue btn-effect">Bomba Manual</a>
                            </div>
                        </div>
						
					</div>
					
					<div class="sl-slide" data-orientation="vertical" data-slice1-rotation="10" data-slice2-rotation="-15" data-slice1-scale="1.5" data-slice2-scale="1.5">
					
						<div class="bg-img bg-img-2"></div>
						<div class="slide-caption">
                            <div class="caption-content">
                                <h2>Estadisticas</h2>
                            </div>
                        </div>

                        <div class="slide-caption2">
                            <div class="caption-content">
                                <div class="stats-table">    
                                    <table id = "salvanotas">
                                        <thead>
                                        <tr>
                                            <th>ID</th>
                                            <th>Timestamp</th>
                                            <th>Temperatura</th>
                                            <th>Humedad</th>
                                            <th>Intensidad</th>
                                            <th>Estado</th>
                                        </tr>
                                        </thead>
                                        <tbody>
                                        
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
						
					</div>
					

				</div><!-- /sl-slider -->

                <!-- 
                <nav id="nav-arrows" class="nav-arrows">
                    <span class="nav-arrow-prev">Previous</span>
                    <span class="nav-arrow-next">Next</span>
                </nav>
                -->
                
                <nav id="nav-arrows" class="nav-arrows hidden-xs hidden-sm visible-md visible-lg">
                    <a href="javascript:;" class="sl-prev">
                        <i class="fa fa-angle-left fa-3x"></i>
                    </a>
                    <a href="javascript:;" class="sl-next">
                        <i class="fa fa-angle-right fa-3x"></i>
                    </a>
                </nav>
                

				<nav id="nav-dots" class="nav-dots visible-xs visible-sm hidden-md hidden-lg">
					<span class="nav-dot-current"></span>
					<span></span>
					<span></span>
				</nav>

			</div><!-- /slider-wrapper -->
		</section>
		
        <!--
        End Home SliderEnd
        ==================================== -->

		<!-- Essential jQuery Plugins
		================================================== -->
		<!-- Main jQuery -->
        <script src="js/jquery-1.11.1.min.js"></script>
		<!-- Single Page Nav -->
        <script src="js/jquery.singlePageNav.min.js"></script>
        <!-- jquery easing -->
        <script src="js/jquery.easing.min.js"></script>
        <!-- Fullscreen slider -->
        <script src="js/jquery.slitslider.js"></script>
        <script src="js/jquery.ba-cond.min.js"></script>

		<!-- Custom Functions -->
        <script src="js/main.js"></script>
    </body>
</html>